% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/migrate_stage_runs.R
\name{migrate_stage_runs}
\alias{migrate_stage_runs}
\title{Migrate Task Runs to Different Stage}
\usage{
migrate_stage_runs(
  old_stage_name,
  new_stage_name,
  delete_old_stage = FALSE,
  conn = NULL,
  quiet = FALSE
)
}
\arguments{
\item{old_stage_name}{Name of the stage to migrate from}

\item{new_stage_name}{Name of the stage to migrate to (must exist)}

\item{delete_old_stage}{If TRUE, delete the old stage and its tasks after
migration (default: FALSE for safety)}

\item{conn}{Optional database connection. If NULL, uses connection from config.}

\item{quiet}{If TRUE, suppress informational messages (default: FALSE)}
}
\value{
Invisibly returns a list with migration details:
\item{tasks_migrated}{Number of tasks migrated}
\item{runs_updated}{Number of task_runs updated}
\item{old_tasks_deleted}{Number of old tasks deleted (if delete_old_stage=TRUE)}
}
\description{
Migrates all task_runs from tasks in an old stage to corresponding tasks
in a new stage. Tasks are matched by task_name. Optionally deletes the
old stage and tasks after migration.
}
\details{
This is useful when renaming stages or reorganizing the task hierarchy.
The function ensures referential integrity by updating task_runs before
attempting to delete old tasks.
}
\examples{
\dontrun{
# Migrate runs from FCC_DOWNLOAD to DAILY_FCC_DOWNLOAD
migrate_stage_runs("FCC_DOWNLOAD", "DAILY_FCC_DOWNLOAD", delete_old_stage = TRUE)

# Preview migration without deleting old stage
migrate_stage_runs("OLD_STAGE", "NEW_STAGE", delete_old_stage = FALSE)
}
}
