% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/find_and_update_subtask.R
\name{find_and_update_subtask}
\alias{find_and_update_subtask}
\title{Find and update subtask progress by name or filename}
\usage{
find_and_update_subtask(
  stage,
  task,
  subtask,
  status = c("RUNNING", "COMPLETED", "FAILED", "SKIPPED"),
  percent = NULL,
  items_total = NULL,
  items_completed = NULL,
  message = NULL,
  error_message = NULL,
  quiet = FALSE,
  conn = NULL,
  filename,
  force = TRUE
)
}
\arguments{
\item{stage}{Stage name or number (e.g., "DAILY_FCC_SUMMARY", 8). Optional
if \code{filename} is provided.}

\item{task}{Task name or number (e.g., "Provider Tables Block20", 3). Optional
if \code{filename} is provided.}

\item{subtask}{Subtask number (1, 2, 3...) or subtask name. Required.}

\item{status}{Optional: Status to set (RUNNING, COMPLETED, FAILED, SKIPPED)}

\item{percent}{Optional: Percent complete 0-100}

\item{items_total}{Optional: Total items for this subtask}

\item{items_completed}{Optional: Items completed so far}

\item{message}{Optional: Progress message}

\item{error_message}{Optional: Error message if failed}

\item{quiet}{Suppress console messages (default: FALSE)}

\item{conn}{Database connection (optional)}

\item{filename}{Optional: Script filename to identify task. If provided,
\code{stage} and \code{task} are ignored. Supports partial matching.}

\item{force}{Logical: If TRUE (default), create a new task run if none exists.
If FALSE, fail with an error when no run is found.}
}
\value{
TRUE on success, FALSE if task/subtask not found
}
\description{
Updates the progress of a subtask in the most recent task run by searching
for the task. Supports multiple ways to specify the task: by filename alone,
by stage and task number, or by stage and task name.
}
\details{
Multiple ways to specify the task:
\itemize{
\item \strong{By filename alone} (no stage needed): \code{filename = "06_DAILY_FCC_SUMMARY_03_Provider_Tables_Block20.R"}
\item \strong{By stage number and task number}: \verb{stage = 8, task = 3}
\item \strong{By stage name and task number}: \verb{stage = "DAILY_FCC_SUMMARY", task = 3}
\item \strong{By stage and task name}: \verb{stage = "DAILY_FCC_SUMMARY", task = "Provider Tables Block20"}
}

Filename matching is case-insensitive and supports partial matching.
If multiple tasks match by filename, an error is raised.
}
\examples{
\dontrun{
# By filename alone (no stage needed)
find_and_update_subtask(
  filename = "06_DAILY_FCC_SUMMARY_03_Provider_Tables_Block20.R",
  subtask = 2,
  status = "COMPLETED",
  items_completed = 100
)

# By stage number and task number
find_and_update_subtask(8, 3, subtask = 1, status = "COMPLETED")

# By stage name and task name
find_and_update_subtask(
  stage = "STATIC",
  task = "TIGER_Census_Blocks",
  subtask = 1,
  items_total = 3235,
  percent = 50
)
}
}
\seealso{
\code{\link[=subtask_update]{subtask_update()}} to update subtask with explicit run_id,
\code{\link[=find_and_update_task]{find_and_update_task()}} for task updates
}
