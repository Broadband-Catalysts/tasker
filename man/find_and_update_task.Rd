% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/find_and_update_task.R
\name{find_and_update_task}
\alias{find_and_update_task}
\title{Find and update task status by name or filename}
\usage{
find_and_update_task(
  stage,
  task,
  status = c("RUNNING", "COMPLETED", "FAILED", "SKIPPED", "CANCELLED"),
  message = NULL,
  error_message = NULL,
  quiet = FALSE,
  conn = NULL,
  filename,
  force = TRUE
)
}
\arguments{
\item{stage}{Stage name or number (e.g., "DAILY_FCC_SUMMARY", 8). Optional
if \code{filename} is provided.}

\item{task}{Task name or number (e.g., "Provider Tables Block20", 3). Optional
if \code{filename} is provided.}

\item{status}{Status to set: RUNNING, COMPLETED, FAILED, SKIPPED, CANCELLED}

\item{message}{Optional status message}

\item{error_message}{Optional error message (typically used with FAILED status)}

\item{quiet}{Suppress console messages (default: FALSE)}

\item{conn}{Database connection (optional)}

\item{filename}{Optional: Script filename to identify task. If provided,
\code{stage} and \code{task} are ignored. Supports partial matching.}

\item{force}{Logical: If TRUE (default), create a new task run if none exists.
If FALSE, fail with an error when no run is found.}
}
\value{
TRUE on success, FALSE if task not found
}
\description{
Updates the status of the most recent task run by searching for the task.
Supports multiple ways to specify the task: by filename alone, by stage and
task number, or by stage and task name.
}
\details{
Multiple ways to specify the task:
\itemize{
\item \strong{By filename alone} (no stage needed): \code{filename = "06_DAILY_FCC_SUMMARY_03_Provider_Tables_Block20.R"}
\item \strong{By stage number and task number}: \verb{stage = 8, task = 3}
\item \strong{By stage name and task number}: \verb{stage = "DAILY_FCC_SUMMARY", task = 3}
\item \strong{By stage and task name}: \verb{stage = "DAILY_FCC_SUMMARY", task = "Provider Tables Block20"}
}

Filename matching is case-insensitive and supports partial matching.
If multiple tasks match by filename, an error is raised.
}
\examples{
\dontrun{
# By filename alone (filename is unique)
find_and_update_task(
  filename = "06_DAILY_FCC_SUMMARY_03_Provider_Tables_Block20.R",
  status = "COMPLETED"
)

# By stage number and task number
find_and_update_task(8, 3, "COMPLETED")

# By stage name and task name
find_and_update_task(
  stage = "DAILY_FCC_SUMMARY",
  task = "Provider Tables Block20",
  status = "COMPLETED",
  message = "Manually corrected"
)

# Mark a task as failed
find_and_update_task(
  stage = "STATIC",
  task = "TIGER_State_Boundaries",
  status = "FAILED",
  error_message = "Data validation failed"
)
}
}
\seealso{
\code{\link[=task_update]{task_update()}} to update task with explicit run_id,
\code{\link[=find_and_update_subtask]{find_and_update_subtask()}} for subtask updates
}
